function unixConvert(a,b){var a=$("#from").val(),b=$("#to").val(),c=moment(a).unix(),d=moment(b).unix();return console.log(c+" to "+d),c+"-"+d}function removeDuplicate(){var a={};$(".tag").each(function(){var b=$(this).text();a[b]?$(this).remove():a[b]=!0})}$(document).ready(function(){}),$(function(){$("#from").datepicker({defaultDate:"-1d",changeMonth:!0,changeYear:!0,numberOfMonths:1,onClose:function(a){$("#to").datepicker("option","minDate",a)}}),$("#to").datepicker({defaultDate:"+1d",changeMonth:!0,changeYear:!0,numberOfMonths:1,onClose:function(a){$("#from").datepicker("option","maxDate",a)}})}),Grabbed=Backbone.Model.extend({defaults:{},initialize:function(){console.log("really cool we made a model")}}),allGrabbed=Backbone.Collection.extend({initialize:function(){console.log("cool new collection"),this.on("add",function(a){new ImageView({model:a})})},model:Grabbed,url:"https://api.instagram.com/v1/users/search?q=flackap&access_token=2695069.1eea9a1.5344624053fb40089c31b7d9c2c2c05b&callback=?"}),ImageView=Backbone.View.extend({template:_.template($("#photo-template").text()),className:"image-unit",initialize:function(){console.log("view created!"),$(".image-list").append(this.el),this.render()},render:function(){var a=this;this.$el.append(this.template({item:this.model})),this.model.get("tags").forEach(function(b){var c=$("<div class='tag'>#"+b+" </div>");$(".iso-tags").append(c),a.$el.addClass(b),c.click(function(){console.log("hey you clicked",b),$(".image-unit").addClass("hidden"),$(".image-unit."+b).removeClass("hidden")}),$(".all").click(function(){$(".image-unit").removeClass("hidden")})}),removeDuplicate()}}),MainView=Backbone.View.extend({initialize:function(){var a=this;this.images=new allGrabbed,this.logInCheck(),$(".grab").click(function(){unixConvert();var b=$(".user").val();console.log("https://api.instagram.com/v1/users/search?q="+b+"&access_token=2695069.1eea9a1.5344624053fb40089c31b7d9c2c2c05b&callback=?"),$.getJSON("https://api.instagram.com/v1/users/search?q="+b+"&access_token=2695069.1eea9a1.5344624053fb40089c31b7d9c2c2c05b&callback=?").then(function(b){console.log("userID = ",b.data[0].id),$.getJSON("https://api.instagram.com/v1/users/"+b.data[0].id+"/media/recent?access_token=2695069.1eea9a1.5344624053fb40089c31b7d9c2c2c05b&count=33&next_max_id&callback=?").then(function(b){console.log("WOW THE PICS ARE",b.data),a.images.add(b.data)})}),$(".footer").hide()})},logInCheck:function(){window.location.hash?(this.accesstoken=window.location.hash.replace("#access_token=",""),console.log(window.location.hash.replace("#access_token=","")),console.log("cool works"),$(".authorize").hide()):(console.log("no hash"),$(".authorize").show())}});var mainView=new MainView;